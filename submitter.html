<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>PCBvalues</title><link rel="icon" type="x-icon" href="./assets/icon.png"><link rel="shortcut icon" type="x-icon" href="./assets/icon.png"><meta name="theme-color" content="#000000" data-react-helmet="true"><meta property="og:ttl" content="600"><meta property="og:type" content="website"><meta property="og:site_name" content="pcbvalues.github.io"><meta property="og:url" content=":https://pcbvalues.github.io"><meta property="og:title" content="PCBvalues"><meta property="og:description" content="PCBvalues is a test for what kind of member of the political community you are and what camps you fall into."><meta property="og:image" content="https://pcbvalues.github.io/assets/icon.png"><meta property="og:image:width" content="250"><meta property="og:image:height" content="250"><link href="./dist/style.css" rel="stylesheet" type="text/css"></head><body><h1>PCBvalues</h1><h2>Result Submitter</h2><lottie-player mode="normal" style="display: none;width: 320px;margin: 0 auto"></lottie-player><form><label for="name">Insert the name you want displayed below:</label><br style="margin-bottom: 1.5vw"><input for="text" id="name" name="name"></form><button class="button" id="send-button">Send</button><button class="button" onclick="window.history.back()" id="back-button">Back</button><script type="application/javascript">globalThis.VERSION="3.1.5";globalThis.SIZE=7;globalThis.API_URL="https://pcbvalues.000webhostapp.com/api.php";</script><script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script><script type="module">import{parseScores as o}from"./dist/common.min.js";const t={success:"./assets/85185-checkmark.json",failure:"./assets/94303-failed.json",loading:"./assets/124239-loading-bouncy.json"};let e=!1,n=0;const s=document.querySelector("lottie-player"),r=document.getElementById("name");function a(o,e=null){s.load(t[o]),s.style.display="block",s.loop=!1,s.play();const n=()=>{s.style.display="none",s.removeEventListener("complete",n),e&&(o=>{if(confirm("Automatic submission of your scores failed, do you wish to download a copy of the scores to submit manually to the developers?")){const t=document.createElement("a");t.href="data:text/json;charset=utf-8,"+encodeURIComponent(o),t.download="scores.json",t.click()}})(e)};s.addEventListener("complete",n)}function c(o){const t=o.trim();if(0===t.length){const o=prompt("You did not enter a username, please enter one and submit.");if(null===o)throw Error("Username entering cancelled");return c(o)}return t}function i(o,t){const e=o.get(t);return e?decodeURIComponent(e):null}function l(){const o=new URLSearchParams(location.search);return[i(o,"edition"),i(o,"digest"),i(o,"score")]}function u(){if(e)return;const i=c(r.value);if(n>0){if(!confirm("You already submitted your scores, do you wish to submit a new time?"))return}else if(!confirm(`Do you confirm you wish to submit your scores under the name of "${i}"?`))return;e=!0,(async e=>{const[n,r,a]=l(),c={name:e,vals:o(a,globalThis.SIZE),time:(i=r,i?localStorage.getItem(i):null),edition:n,digest:r,takes:Object.keys(localStorage).filter((o=>{if(o.length<64)return!1;const t=localStorage.getItem(o);if(!t)return!1;try{return new Date(t).valueOf()>1672531200}catch(o){return!1}})).length,version:globalThis.VERSION};var i;const u=JSON.stringify(c);localStorage.setItem("last-submittion",u);const m=new AbortController,d=setTimeout((()=>m.abort()),1e4),f={method:"POST",headers:{"Content-Type":"text/plain"},signal:m.signal,body:u};s.load(t.loading),s.style.display="block",s.loop=!0,s.play();const b=await fetch(globalThis.API_URL,f);clearTimeout(d);const h=await b.json();if(b.status>299||!h.success)throw Error("Failed to submit scores: "+h.error)})(i).then((()=>{n++,a("success")})).catch((o=>{console.error(o);const t=localStorage.getItem("last-submittion");localStorage.removeItem("last-submittion"),a("failure",t)})).finally((()=>{e=!1}))}document.getElementById("name")?.addEventListener("keydown",(o=>{"Enter"===o.key&&(o.preventDefault(),u())})),document.getElementById("send-button")?.addEventListener("click",(()=>{u()})),window.addEventListener("load",(()=>{try{const t=localStorage.getItem("last-submittion");if(!t)return;const e=JSON.parse(t).vals;if(!e)return;o(l()[2],globalThis.SIZE).every(((o,t)=>o===e[t]))&&alert("You already submitted this score before")}catch(o){console.error(o),alert(o+"")}}));</script></body></html>