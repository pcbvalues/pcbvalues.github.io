<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>PCBvalues</title><link rel="icon" type="x-icon" href="./assets/icon.png"><link rel="shortcut icon" type="x-icon" href="./assets/icon.png"><meta name="theme-color" content="#000000" data-react-helmet="true"><meta property="og:ttl" content="600"><meta property="og:type" content="website"><meta property="og:site_name" content="pcbvalues.github.io"><meta property="og:url" content=":https://pcbvalues.github.io"><meta property="og:title" content="PCBvalues"><meta property="og:description" content="PCBvalues is a test for what kind of member of the political community you are and what camps you fall into."><meta property="og:image" content="https://pcbvalues.github.io/assets/icon.png"><meta property="og:image:width" content="250"><meta property="og:image:height" content="250"><link href="./dist/style.css" rel="stylesheet" type="text/css"></head><body><h1>PCBvalues</h1><h2>Result Submitter</h2><lottie-player mode="normal" style="display: none;width: 320px;margin: 0 auto"></lottie-player><form><label for="name">Insert the name you want displayed below:</label><br style="margin-bottom: 1.5vw"><input for="text" id="name" name="name"></form><button class="button" id="send-button">Send</button><button class="button" onclick="window.history.back()" id="back-button">Back</button><script type="application/javascript">globalThis.VERSION = "3.0.0";globalThis.SIZE = 7;globalThis.API_URL = "https://pcbval.theghostofinky.repl.co/apiv3/";</script><script src="https://unpkg.com/@lottiefiles/lottie-player@0.4.0/dist/lottie-player.js"></script><script type="module">import{parseScores as e}from"./dist/common.min.js";const t={success:"./assets/85185-checkmark.json",failure:"./assets/94303-failed.json",loading:"./assets/124239-loading-bouncy.json"};let o=!1,n=0;const s=document.querySelector("lottie-player"),i=document.getElementById("name");function a(e,o=null){s.load(t[e]),s.style.display="block",s.loop=!1,s.play();const n=()=>{s.style.display="none",s.removeEventListener("complete",n),o&&function(e){if(confirm("Automatic submission of your scores failed, do you wish to download a copy of the scores to submit manually to the developers?")){const t=document.createElement("a");t.href="data:text/json;charset=utf-8,"+encodeURIComponent(e),t.download="scores.json",t.click()}}(o)};s.addEventListener("complete",n)}function r(e){const t=e.trim();if(0===t.length){return r(prompt("You did not enter a username, please enter one and submit.")??"")}return t}function l(){const e=new URLSearchParams(location.search);return[e.get("edition")??"missing",decodeURIComponent(e.get("digest")??"missing"),decodeURIComponent(e.get("score")??"missing")]}function c(){if(o)return;o=!0;const c=r(i.value);if(n>0){if(!confirm("You already submitted your scores, do you wish to submit a new time?"))return}else if(!confirm(`Do you confirm you wish to submit your scores under the name of "${c}"?`))return;(async function(o){const i=l(),r={name:o,vals:e(i[2],globalThis.SIZE),edition:i[0],digest:i[1],version:globalThis.VERSION},c=JSON.stringify(r);localStorage.setItem("last-submittion",c);const d=new AbortController,u=setTimeout((()=>d.abort()),1e4),m={method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},signal:d.signal,body:c};s.load(t.loading),s.style.display="block",s.loop=!0,s.play();const f=await fetch(globalThis.API_URL,m);if(!(await f.json()).success)throw Error("Failed to submit scores");n++,clearTimeout(u),a("success")})(c).then((()=>{o=!1})).catch((e=>{o=!1,console.error(e);a("failure",localStorage.getItem("last-submittion"))}))}document.getElementById("name")?.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),c())})),document.getElementById("send-button")?.addEventListener("click",(()=>{c()})),window.addEventListener("load",(()=>{const t=localStorage.getItem("last-submittion");if(!t)return;const o=JSON.parse(t).vals;if(!o)return;e(l()[2],globalThis.SIZE).map(((e,t)=>e===o[t])).every((e=>e))&&alert("You already submitted this score before")}));</script></body></html>