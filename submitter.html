<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>PCBvalues</title><link rel="icon" type="x-icon" href="./assets/icon.png"><link rel="shortcut icon" type="x-icon" href="./assets/icon.png"><meta name="theme-color" content="#000000" data-react-helmet="true"><meta property="og:ttl" content="600"><meta property="og:type" content="website"><meta property="og:site_name" content="pcbvalues.github.io"><meta property="og:url" content=":https://pcbvalues.github.io"><meta property="og:title" content="PCBvalues"><meta property="og:description" content="PCBvalues is a test for what kind of member of the political community you are and what camps you fall into."><meta property="og:image" content="https://pcbvalues.github.io/assets/icon.png"><meta property="og:image:width" content="250"><meta property="og:image:height" content="250"><link href="./dist/style.css" rel="stylesheet" type="text/css"></head><body><h1>PCBvalues</h1><h2>Result Submitter</h2><lottie-player mode="normal" style="display: none;width: 320px;margin: 0 auto"></lottie-player><form><label for="name">Insert the name you want displayed below:</label><br style="margin-bottom: 1.5vw"><input for="text" id="name" name="name"></form><button class="button" id="send-button">Send</button><button class="button" onclick="window.history.back()" id="back-button">Back</button><script type="application/javascript">globalThis.VERSION = "3.0.5";globalThis.SIZE = 7;globalThis.API_URL = "https://pcbval.theghostofinky.repl.co/apiv3/";</script><script src="https://unpkg.com/@lottiefiles/lottie-player@0.4.0/dist/lottie-player.js"></script><script type="module">import{parseScores as o}from"./dist/common.min.js";const e={success:"./assets/85185-checkmark.json",failure:"./assets/94303-failed.json",loading:"./assets/124239-loading-bouncy.json"};let t=!1,s=0;const n=document.querySelector("lottie-player"),i=document.getElementById("name");function a(o,t=null){n.load(e[o]),n.style.display="block",n.loop=!1,n.play();const s=()=>{n.style.display="none",n.removeEventListener("complete",s),t&&(o=>{if(confirm("Automatic submission of your scores failed, do you wish to download a copy of the scores to submit manually to the developers?")){const e=document.createElement("a");e.href="data:text/json;charset=utf-8,"+encodeURIComponent(o),e.download="scores.json",e.click()}})(t)};n.addEventListener("complete",s)}function c(o){const e=o.trim();return 0===e.length?c(prompt("You did not enter a username, please enter one and submit.")??""):e}function r(){const o=new URLSearchParams(location.search);return[o.get("edition")??"missing",decodeURIComponent(o.get("digest")??"missing"),decodeURIComponent(o.get("score")??"missing")]}function l(){if(t)return;t=!0;const l=c(i.value);if(s>0){if(!confirm("You already submitted your scores, do you wish to submit a new time?"))return}else if(!confirm(`Do you confirm you wish to submit your scores under the name of "${l}"?`))return;(async t=>{const i=r(),c={name:t,vals:o(i[2],globalThis.SIZE),edition:i[0],digest:i[1],version:globalThis.VERSION},l=JSON.stringify(c);localStorage.setItem("last-submittion",l);const u=new AbortController,m=setTimeout((()=>u.abort()),1e4),d={method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},signal:u.signal,body:l};n.load(e.loading),n.style.display="block",n.loop=!0,n.play();const f=await fetch(globalThis.API_URL,d);if(!(await f.json()).success)throw Error("Failed to submit scores");s++,clearTimeout(m),a("success")})(l).then((()=>{t=!1})).catch((o=>{t=!1,console.error(o),a("failure",localStorage.getItem("last-submittion"))}))}document.getElementById("name")?.addEventListener("keydown",(o=>{"Enter"===o.key&&(o.preventDefault(),l())})),document.getElementById("send-button")?.addEventListener("click",(()=>{l()})),window.addEventListener("load",(()=>{const e=localStorage.getItem("last-submittion");if(!e)return;const t=JSON.parse(e).vals;t&&o(r()[2],globalThis.SIZE).map(((o,e)=>o===t[e])).every((o=>o))&&alert("You already submitted this score before")}));</script></body></html>