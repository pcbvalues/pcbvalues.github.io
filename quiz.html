<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>PCBvalues</title><link rel="icon" type="x-icon" href="./assets/icon.png"><link rel="shortcut icon" type="x-icon" href="./assets/icon.png"><meta name="theme-color" content="#000000" data-react-helmet="true"><meta property="og:ttl" content="600"><meta property="og:type" content="website"><meta property="og:site_name" content="pcbvalues.github.io"><meta property="og:url" content=":https://pcbvalues.github.io"><meta property="og:title" content="PCBvalues"><meta property="og:description" content="PCBvalues is a test for what kind of member of the political community you are and what camps you fall into."><meta property="og:image" content="https://pcbvalues.github.io/assets/icon.png"><meta property="og:image:width" content="250"><meta property="og:image:height" content="250"><link href="./dist/style.css" rel="stylesheet" type="text/css"></head><body><h1>PCBvalues</h1><h2 style="text-align:center;" id="question-number">Loading...</h2><p class="question" id="question-text"> </p><button class="button" id="button-stag">&nbsp</button><button class="button" id="button-ag">Partially Agree</button><button class="button" id="button-neut">Neutral</button><button class="button" id="button-disag">Partially Disagree</button><button class="button" id="button-stdisag">&nbsp</button><div><button class="small-button" id="back-button">Back</button></div><script type="module">import{getJson as t,windowPromise as e}from"./dist/common.min.js";const s=document.getElementById("question-number"),n=document.getElementById("question-text");class o{_index;_questions;_scores;_short;constructor(t,e){this._index=0,this._questions=t,this._scores=Array(this._questions.length).fill(0),this._short=e}get index(){return this._index+1}get size(){return this._questions.length}get yesno(){return!!(2&this._questions[this._index].flags)}get text(){return this._questions[this._index].text}nextQuestion(t){return this._scores[this._index]=t,++this._index<this._questions.length}previousQuestion(){return--this._index>0}async getScores(){const t=this._questions[0].effect.length,e=this._questions.map(((t,e)=>t.effect.map((t=>this._scores[e]*t)))).reduce(((t,e)=>e.map(((e,s)=>t[s]+e))),Array(t).fill(0)),s=this._questions.map((t=>t.effect.map(Math.abs))).reduce(((t,e)=>e.map(((e,s)=>t[s]+e))),Array(t).fill(0)).map(((t,s)=>100*(t+e[s])/(2*t)));if(s.some((t=>t>100||t<0||isNaN(t))))throw Error("Invalid scores");const n=s.map((t=>t.toFixed(1))).join(","),o=(new TextEncoder).encode(n),i=await crypto.subtle.digest("SHA-512",o),r=String.fromCharCode(...new Uint8Array(i));return"results.html?"+new URLSearchParams([["score",n],["digest",btoa(r)],["edition",this._short?"s":"f"]])}}function i(t,e){s.textContent=`Question ${t.index} of ${t.size}`,n.innerHTML=t.text;for(const[s,n]of e.entries())if(t.yesno)switch(s){case 0:n.textContent="Yes";break;case 4:n.textContent="No";break;default:n.style.display="none"}else switch(s){case 0:n.textContent="Strongly Agree";break;case 4:n.textContent="Strongly Disagree";break;default:n.style.display="block"}}(async()=>{const[s,n,r]=await Promise.all([t("questions"),t("values"),e]),a=[...location.search.toLowerCase()];!function(t,e,s,n){const r=s?t.filter((t=>1&t.flags)):t,a=n?r.sort((()=>.5-Math.random())):r,c=new o(a,s),u=["stag","ag","neut","disag","stdisag"].map((t=>document.getElementById("button-"+t)));for(const[t,e]of u.entries()){const s=(2-t)/2;e.addEventListener("click",(()=>{c.nextQuestion(s)?i(c,u):c.getScores().then((t=>location.href=t))}))}document.getElementById("back-button").addEventListener("click",(()=>{c.previousQuestion()?i(c,u):window.history.back()})),i(c,u)}(s,0,a.some((t=>"s"===t)),a.some((t=>"r"===t)))})();</script></body></html>