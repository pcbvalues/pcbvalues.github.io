<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>PCBvalues</title><link rel="icon" type="x-icon" href="./assets/icon.png"><link rel="shortcut icon" type="x-icon" href="./assets/icon.png"><meta name="theme-color" content="#000000" data-react-helmet="true"><meta property="og:ttl" content="600"><meta property="og:type" content="website"><meta property="og:site_name" content="pcbvalues.github.io"><meta property="og:url" content=":https://pcbvalues.github.io"><meta property="og:title" content="PCBvalues"><meta property="og:description" content="PCBvalues is a test for what kind of member of the political community you are and what camps you fall into."><meta property="og:image" content="https://pcbvalues.github.io/assets/icon.png"><meta property="og:image:width" content="250"><meta property="og:image:height" content="250"><link href="./dist/style.css" rel="stylesheet" type="text/css"></head><body><h1>PCBvalues</h1><h2 style="text-align:center;" id="question-number">Loading...</h2><p class="question" id="question-text"> </p><button class="button" id="button-stag">&nbsp</button><button class="button" id="button-ag">Partially Agree</button><button class="button" id="button-neut">Neutral</button><button class="button" id="button-disag">Partially Disagree</button><button class="button" id="button-stdisag">&nbsp</button><div><button class="small-button" id="back-button">Back</button></div><script type="module">import{getJson as t,windowPromise as s}from"./dist/common.min.js";const e=document.getElementById("question-number"),o=document.getElementById("question-text");class i{t;o;i;h;constructor(t,s){this.t=0,this.o=t,this.i=Array(this.o.length).fill(0),this.h=s}get index(){return this.t+1}get size(){return this.o.length}get yesno(){return!!(2&this.o[this.t].flags)}get text(){return this.o[this.t].text}nextQuestion(t){return this.i[this.t]=t,++this.t<this.o.length}previousQuestion(){return--this.t>0}async getScores(){const t=this.o[0].effect.length,s=this.o.map(((t,s)=>t.effect.map((t=>this.i[s]*t)))).reduce(((t,s)=>s.map(((s,e)=>t[e]+s))),Array(t).fill(0)),e=this.o.map((t=>t.effect.map(Math.abs))).reduce(((t,s)=>s.map(((s,e)=>t[e]+s))),Array(t).fill(0)).map(((t,e)=>100*(t+s[e])/(2*t)));if(e.some((t=>t>100||t<0||isNaN(t))))throw Error("Invalid scores");const o=e.map((t=>t.toFixed(1))).join(","),i=(new TextEncoder).encode(o),n=await crypto.subtle.digest("SHA-512",i),r=String.fromCharCode(...new Uint8Array(n));return"results.html?"+new URLSearchParams([["score",o],["digest",btoa(r)],["edition",this.h?"s":"f"]])}}function n(t,s){e.textContent=`Question ${t.index} of ${t.size}`,o.innerHTML=t.text;for(const[e,o]of s.entries())if(t.yesno)switch(e){case 0:o.textContent="Yes";break;case 4:o.textContent="No";break;default:o.style.display="none"}else switch(e){case 0:o.textContent="Strongly Agree";break;case 4:o.textContent="Strongly Disagree";break;default:o.style.display="block"}}(async()=>{const[e,o,r]=await Promise.all([t("questions"),t("values"),s]),c=[...location.search.toLowerCase()];((t,s,e,o)=>{const r=e?t.filter((t=>1&t.flags)):t,c=o?r.sort((()=>.5-Math.random())):r,a=new i(c,e),h=["stag","ag","neut","disag","stdisag"].map((t=>document.getElementById("button-"+t)));for(const[t,s]of h.entries()){const e=(2-t)/2;s.addEventListener("click",(()=>{a.nextQuestion(e)?n(a,h):a.getScores().then((t=>location.href=t))}))}document.getElementById("back-button").addEventListener("click",(()=>{a.previousQuestion()?n(a,h):window.history.back()})),n(a,h)})(e,0,c.some((t=>"s"===t)),c.some((t=>"r"===t)))})();</script></body></html>